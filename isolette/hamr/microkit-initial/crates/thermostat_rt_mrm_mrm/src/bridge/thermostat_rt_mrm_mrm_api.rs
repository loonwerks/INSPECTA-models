// Do not edit this file as it will be overwritten if codegen is rerun

use vstd::prelude::*;
use data::*;
use super::extern_c_api as extern_api;

verus! {
  pub trait thermostat_rt_mrm_mrm_Api {}

  pub trait thermostat_rt_mrm_mrm_Put_Api: thermostat_rt_mrm_mrm_Api {
    #[verifier::external_body]
    fn unverified_put_regulator_mode(
      &mut self,
      value: Isolette_Data_Model::Regulator_Mode) 
    {
      extern_api::unsafe_put_regulator_mode(&value);
    }
  }

  pub trait thermostat_rt_mrm_mrm_Get_Api: thermostat_rt_mrm_mrm_Api {
    #[verifier::external_body]
    fn unverified_get_interface_failure(
      &mut self,
      value: &Ghost<Isolette_Data_Model::Failure_Flag_i>) -> (res : Isolette_Data_Model::Failure_Flag_i)
      ensures
        res == value@ 
    {
      return extern_api::unsafe_get_interface_failure();
    }

    #[verifier::external_body]
    fn unverified_get_internal_failure(
      &mut self,
      value: &Ghost<Isolette_Data_Model::Failure_Flag_i>) -> (res : Isolette_Data_Model::Failure_Flag_i)
      ensures
        res == value@ 
    {
      return extern_api::unsafe_get_internal_failure();
    }

    #[verifier::external_body]
    fn unverified_get_current_tempWstatus(
      &mut self,
      value: &Ghost<Isolette_Data_Model::TempWstatus_i>) -> (res : Isolette_Data_Model::TempWstatus_i)
      ensures
        res == value@ 
    {
      return extern_api::unsafe_get_current_tempWstatus();
    }
  }

  pub trait thermostat_rt_mrm_mrm_Full_Api: thermostat_rt_mrm_mrm_Put_Api + thermostat_rt_mrm_mrm_Get_Api {}

  pub struct thermostat_rt_mrm_mrm_Application_Api<API: thermostat_rt_mrm_mrm_Api> {
    pub api: API,

    pub ghost interface_failure: Isolette_Data_Model::Failure_Flag_i,
    pub ghost regulator_mode: Isolette_Data_Model::Regulator_Mode,
    pub ghost internal_failure: Isolette_Data_Model::Failure_Flag_i,
    pub ghost current_tempWstatus: Isolette_Data_Model::TempWstatus_i
  }

  impl<API: thermostat_rt_mrm_mrm_Put_Api> thermostat_rt_mrm_mrm_Application_Api<API> {
    pub fn put_regulator_mode(
      &mut self,
      value: Isolette_Data_Model::Regulator_Mode)
      ensures
        old(self).current_tempWstatus == self.current_tempWstatus,
        old(self).interface_failure == self.interface_failure,
        old(self).internal_failure == self.internal_failure,
        self.regulator_mode == value 
    {
      self.api.unverified_put_regulator_mode(value);
      self.regulator_mode = value;
    }
  }

  impl<API: thermostat_rt_mrm_mrm_Get_Api> thermostat_rt_mrm_mrm_Application_Api<API> {
    pub fn get_interface_failure(&mut self) -> (res : Isolette_Data_Model::Failure_Flag_i)
      ensures
        old(self).current_tempWstatus == self.current_tempWstatus,
        old(self).interface_failure == self.interface_failure,
        res == self.interface_failure,
        old(self).internal_failure == self.internal_failure,
        old(self).regulator_mode == self.regulator_mode 
    {
      self.api.unverified_get_interface_failure(&Ghost(self.interface_failure))
    }
    pub fn get_internal_failure(&mut self) -> (res : Isolette_Data_Model::Failure_Flag_i)
      ensures
        old(self).current_tempWstatus == self.current_tempWstatus,
        old(self).interface_failure == self.interface_failure,
        old(self).internal_failure == self.internal_failure,
        res == self.internal_failure,
        old(self).regulator_mode == self.regulator_mode 
    {
      self.api.unverified_get_internal_failure(&Ghost(self.internal_failure))
    }
    pub fn get_current_tempWstatus(&mut self) -> (res : Isolette_Data_Model::TempWstatus_i)
      ensures
        old(self).current_tempWstatus == self.current_tempWstatus,
        res == self.current_tempWstatus,
        old(self).interface_failure == self.interface_failure,
        old(self).internal_failure == self.internal_failure,
        old(self).regulator_mode == self.regulator_mode 
    {
      self.api.unverified_get_current_tempWstatus(&Ghost(self.current_tempWstatus))
    }
  }

  pub struct thermostat_rt_mrm_mrm_Initialization_Api;
  impl thermostat_rt_mrm_mrm_Api for thermostat_rt_mrm_mrm_Initialization_Api {}
  impl thermostat_rt_mrm_mrm_Put_Api for thermostat_rt_mrm_mrm_Initialization_Api {}

  pub const fn init_api() -> thermostat_rt_mrm_mrm_Application_Api<thermostat_rt_mrm_mrm_Initialization_Api> {
    return thermostat_rt_mrm_mrm_Application_Api {
      api: thermostat_rt_mrm_mrm_Initialization_Api {},

      interface_failure: Isolette_Data_Model::Failure_Flag_i { flag: false },
      regulator_mode: Isolette_Data_Model::Regulator_Mode::Init_Regulator_Mode,
      internal_failure: Isolette_Data_Model::Failure_Flag_i { flag: false },
      current_tempWstatus: Isolette_Data_Model::TempWstatus_i { degrees: 0, status: Isolette_Data_Model::ValueStatus::Valid }
    }
  }

  pub struct thermostat_rt_mrm_mrm_Compute_Api;
  impl thermostat_rt_mrm_mrm_Api for thermostat_rt_mrm_mrm_Compute_Api {}
  impl thermostat_rt_mrm_mrm_Put_Api for thermostat_rt_mrm_mrm_Compute_Api {}
  impl thermostat_rt_mrm_mrm_Get_Api for thermostat_rt_mrm_mrm_Compute_Api {}
  impl thermostat_rt_mrm_mrm_Full_Api for thermostat_rt_mrm_mrm_Compute_Api {}

  pub const fn compute_api() -> thermostat_rt_mrm_mrm_Application_Api<thermostat_rt_mrm_mrm_Compute_Api> {
    return thermostat_rt_mrm_mrm_Application_Api {
      api: thermostat_rt_mrm_mrm_Compute_Api {},

      interface_failure: Isolette_Data_Model::Failure_Flag_i { flag: false },
      regulator_mode: Isolette_Data_Model::Regulator_Mode::Init_Regulator_Mode,
      internal_failure: Isolette_Data_Model::Failure_Flag_i { flag: false },
      current_tempWstatus: Isolette_Data_Model::TempWstatus_i { degrees: 0, status: Isolette_Data_Model::ValueStatus::Valid }
    }
  }
}