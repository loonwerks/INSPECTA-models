// #Sireum

package sysml.Gubmo_Structs_Arrays

import org.sireum._
import art._
import sysml._
import sysml.Gubmo_Structs_Arrays.MyArrayInt32.FB4CC3
import org.sireum.S32._
import sysml.Gubmo_Structs_Arrays.MyArrayStruct.I30F6A8

// Do not edit this file as it will be overwritten if HAMR codegen is rerun

object ProducerThr_i_Api {
  // guarantee integrationArrayInt32_DataPort
  @strictpure def integrationArrayInt32_DataPort(p_myArrayInt32_DataPort: Gubmo_Structs_Arrays.MyArrayInt32): B =
    p_myArrayInt32_DataPort.value.size == 10 &&
      p_myArrayInt32_DataPort.value(FB4CC3(0)) == s32"1" &
      (GumboLib.GUMBO__Library.librarySpecFunction_Guarantee(p_myArrayInt32_DataPort) & ∀(0 to p_myArrayInt32_DataPort.value.size - 2)(i => p_myArrayInt32_DataPort.value(FB4CC3(i)) <= p_myArrayInt32_DataPort.value(FB4CC3(i + 1))))

  // guarantee integrationArrayInt32_EventDataPort
  @strictpure def integrationArrayInt32_EventDataPort(p_myArrayInt32_EventDataPort: Gubmo_Structs_Arrays.MyArrayInt32): B =
    ∀(0 to p_myArrayInt32_EventDataPort.value.size - 2)(i => p_myArrayInt32_EventDataPort.value(FB4CC3(i)) <= p_myArrayInt32_EventDataPort.value(FB4CC3(i + 1)))

  // guarantee integrationStructArray_EventDataPort
  @strictpure def integrationStructArray_EventDataPort(p_myStructArray_EventDataPort: Gubmo_Structs_Arrays.MyStructArray_i): B =
    ∀(0 to p_myStructArray_EventDataPort.fieldArray.value.size - 2)(i => p_myStructArray_EventDataPort.fieldArray.value(I30F6A8(i)).fieldSInt32 <= p_myStructArray_EventDataPort.fieldArray.value(I30F6A8(i + 1)).fieldSInt32)
}

import ProducerThr_i_Api._

@sig trait ProducerThr_i_Api {
  def id: Art.BridgeId
  def p_myArrayInt32_DataPort_Id : Art.PortId
  def p_myArrayStruct_DataPort_Id : Art.PortId
  def p_myStructArray_DataPort_Id : Art.PortId
  def p_myArrayInt32_EventDataPort_Id : Art.PortId
  def p_myArrayStruct_EventDataPort_Id : Art.PortId
  def p_myStructArray_EventDataPort_Id : Art.PortId

  // Logika spec var representing port state for outgoing data port
  @spec var p_myArrayInt32_DataPort: Gubmo_Structs_Arrays.MyArrayInt32 = $
  @spec def p_myArrayInt32_DataPort_Inv = Invariant(
    integrationArrayInt32_DataPort(p_myArrayInt32_DataPort)
  )

  def put_p_myArrayInt32_DataPort(value : Gubmo_Structs_Arrays.MyArrayInt32) : Unit = {
    Contract(
      Requires(
        integrationArrayInt32_DataPort(value)
      ),
      Modifies(p_myArrayInt32_DataPort),
      Ensures(
        p_myArrayInt32_DataPort == value
      )
    )
    Spec {
      p_myArrayInt32_DataPort = value
    }

    Art.putValue(p_myArrayInt32_DataPort_Id, Gubmo_Structs_Arrays.MyArrayInt32_Payload(value))
  }

  // Logika spec var representing port state for outgoing data port
  @spec var p_myArrayStruct_DataPort: Gubmo_Structs_Arrays.MyArrayStruct = $

  def put_p_myArrayStruct_DataPort(value : Gubmo_Structs_Arrays.MyArrayStruct) : Unit = {
    Contract(
      Modifies(p_myArrayStruct_DataPort),
      Ensures(
        p_myArrayStruct_DataPort == value
      )
    )
    Spec {
      p_myArrayStruct_DataPort = value
    }

    Art.putValue(p_myArrayStruct_DataPort_Id, Gubmo_Structs_Arrays.MyArrayStruct_Payload(value))
  }

  // Logika spec var representing port state for outgoing data port
  @spec var p_myStructArray_DataPort: Gubmo_Structs_Arrays.MyStructArray_i = $

  def put_p_myStructArray_DataPort(value : Gubmo_Structs_Arrays.MyStructArray_i) : Unit = {
    Contract(
      Modifies(p_myStructArray_DataPort),
      Ensures(
        p_myStructArray_DataPort == value
      )
    )
    Spec {
      p_myStructArray_DataPort = value
    }

    Art.putValue(p_myStructArray_DataPort_Id, Gubmo_Structs_Arrays.MyStructArray_i_Payload(value))
  }

  // Logika spec var representing port state for outgoing event data port
  @spec var p_myArrayInt32_EventDataPort: Option[Gubmo_Structs_Arrays.MyArrayInt32] = $
  @spec def p_myArrayInt32_EventDataPort_Inv = Invariant(
    p_myArrayInt32_EventDataPort.isEmpty || integrationArrayInt32_EventDataPort(p_myArrayInt32_EventDataPort.get)
  )

  def put_p_myArrayInt32_EventDataPort(value : Gubmo_Structs_Arrays.MyArrayInt32) : Unit = {
    Contract(
      Requires(
        integrationArrayInt32_EventDataPort(value)
      ),
      Modifies(p_myArrayInt32_EventDataPort),
      Ensures(
        p_myArrayInt32_EventDataPort == Some(value)
      )
    )
    Spec {
      p_myArrayInt32_EventDataPort = Some(value)
    }

    Art.putValue(p_myArrayInt32_EventDataPort_Id, Gubmo_Structs_Arrays.MyArrayInt32_Payload(value))
  }

  // Logika spec var representing port state for outgoing event data port
  @spec var p_myArrayStruct_EventDataPort: Option[Gubmo_Structs_Arrays.MyArrayStruct] = $

  def put_p_myArrayStruct_EventDataPort(value : Gubmo_Structs_Arrays.MyArrayStruct) : Unit = {
    Contract(
      Modifies(p_myArrayStruct_EventDataPort),
      Ensures(
        p_myArrayStruct_EventDataPort == Some(value)
      )
    )
    Spec {
      p_myArrayStruct_EventDataPort = Some(value)
    }

    Art.putValue(p_myArrayStruct_EventDataPort_Id, Gubmo_Structs_Arrays.MyArrayStruct_Payload(value))
  }

  // Logika spec var representing port state for outgoing event data port
  @spec var p_myStructArray_EventDataPort: Option[Gubmo_Structs_Arrays.MyStructArray_i] = $
  @spec def p_myStructArray_EventDataPort_Inv = Invariant(
    p_myStructArray_EventDataPort.isEmpty || integrationStructArray_EventDataPort(p_myStructArray_EventDataPort.get)
  )

  def put_p_myStructArray_EventDataPort(value : Gubmo_Structs_Arrays.MyStructArray_i) : Unit = {
    Contract(
      Requires(
        integrationStructArray_EventDataPort(value)
      ),
      Modifies(p_myStructArray_EventDataPort),
      Ensures(
        p_myStructArray_EventDataPort == Some(value)
      )
    )
    Spec {
      p_myStructArray_EventDataPort = Some(value)
    }

    Art.putValue(p_myStructArray_EventDataPort_Id, Gubmo_Structs_Arrays.MyStructArray_i_Payload(value))
  }

  def logInfo(msg: String): Unit = {
    Art.logInfo(id, msg)
  }

  def logDebug(msg: String): Unit = {
    Art.logDebug(id, msg)
  }

  def logError(msg: String): Unit = {
    Art.logError(id, msg)
  }
}

@datatype class ProducerThr_i_Initialization_Api (
  val id: Art.BridgeId,
  val p_myArrayInt32_DataPort_Id : Art.PortId,
  val p_myArrayStruct_DataPort_Id : Art.PortId,
  val p_myStructArray_DataPort_Id : Art.PortId,
  val p_myArrayInt32_EventDataPort_Id : Art.PortId,
  val p_myArrayStruct_EventDataPort_Id : Art.PortId,
  val p_myStructArray_EventDataPort_Id : Art.PortId) extends ProducerThr_i_Api

@datatype class ProducerThr_i_Operational_Api (
  val id: Art.BridgeId,
  val p_myArrayInt32_DataPort_Id : Art.PortId,
  val p_myArrayStruct_DataPort_Id : Art.PortId,
  val p_myStructArray_DataPort_Id : Art.PortId,
  val p_myArrayInt32_EventDataPort_Id : Art.PortId,
  val p_myArrayStruct_EventDataPort_Id : Art.PortId,
  val p_myStructArray_EventDataPort_Id : Art.PortId) extends ProducerThr_i_Api {

}
